<!DOCTYPE html>
<html lang="fr-FR" class="no-js">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<link rel="profile" href="https://gmpg.org/xfn/11">
	<link rel="pingback" href="https://thomas-veillard.fr/xmlrpc.php">
	<!--[if lt IE 9]>
	<script src="http://localhost/wp-content/themes/twentyfifteen/js/html5.js?ver=3.7.0"></script>
	<![endif]-->
	<script>(function(html){html.className = html.className.replace(/\bno-js\b/,'js')})(document.documentElement);</script>
<meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">

	<!-- This site is optimized with the Yoast SEO plugin v17.9 - https://yoast.com/wordpress/plugins/seo/ -->
	<title>11. JavaScript: practical activity n¬∞2 - Thomas VEILLARD</title>
	<link rel="canonical" href="https://thomas-veillard.fr/front-end-web-development/languages/javascript-practical-activity-n2/">
	<meta property="og:locale" content="fr_FR">
	<meta property="og:type" content="article">
	<meta property="og:title" content="11. JavaScript: practical activity n¬∞2 - Thomas VEILLARD">
	<meta property="og:description" content="Learning outcomes Manage dependencies with npm (install, check updates, find vulnerabilities&#8230;) ; Run cli optionally shipped with your dependencies with npx ; Split your application into multiple ES modules ; Merge those ES-modules into a single bundle and run it into your browser ; Use modern syntax while targeting older browsers using code transpilation ; &hellip; Continuer la lecture de 11. JavaScript: practical activity n¬∞2">
	<meta property="og:url" content="https://thomas-veillard.fr/front-end-web-development/languages/javascript-practical-activity-n2/">
	<meta property="og:site_name" content="Thomas VEILLARD">
	<meta property="article:published_time" content="2021-02-05T10:03:47+00:00">
	<meta property="article:modified_time" content="2022-09-12T18:27:04+00:00">
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:label1" content="√âcrit par">
	<meta name="twitter:data1" content="Thomas Veillard">
	<meta name="twitter:label2" content="Dur√©e de lecture estim√©e">
	<meta name="twitter:data2" content="10 minutes">
	<script type="application/ld+json" class="yoast-schema-graph">{
	    "@context": "https://schema.org",
	    "@graph": [
	        {
	            "@type": "WebSite",
	            "@id": "http://localhost/#website",
	            "url": "http://localhost/",
	            "name": "Thomas VEILLARD",
	            "description": "Mes cours et supports p√©dagogiques pour l&#039;enseignement de l&#039;ing√©nierie informatique.",
	            "publisher": {
	                "@id": "http://localhost/#/schema/person/98465ef1c45a4646324ef7c336388ffb"
	            },
	            "inLanguage": "fr-FR"
	        },
	        {
	            "@type": "WebPage",
	            "@id": "http://localhost/front-end-web-development/languages/javascript-practical-activity-n2/#webpage",
	            "url": "http://localhost/front-end-web-development/languages/javascript-practical-activity-n2/",
	            "name": "11. JavaScript: practical activity n¬∞2 - Thomas VEILLARD",
	            "isPartOf": {
	                "@id": "http://localhost/#website"
	            },
	            "datePublished": "2021-02-05T10:03:47+00:00",
	            "dateModified": "2022-09-12T18:27:04+00:00",
	            "breadcrumb": {
	                "@id": "http://localhost/front-end-web-development/languages/javascript-practical-activity-n2/#breadcrumb"
	            },
	            "inLanguage": "fr-FR",
	            "potentialAction": [
	                {
	                    "@type": "ReadAction",
	                    "target": [
	                        "http://localhost/front-end-web-development/languages/javascript-practical-activity-n2/"
	                    ]
	                }
	            ]
	        },
	        {
	            "@type": "BreadcrumbList",
	            "@id": "http://localhost/front-end-web-development/languages/javascript-practical-activity-n2/#breadcrumb",
	            "itemListElement": [
	                {
	                    "@type": "ListItem",
	                    "position": 1,
	                    "name": "Accueil",
	                    "item": "http://localhost/"
	                },
	                {
	                    "@type": "ListItem",
	                    "position": 2,
	                    "name": "11. JavaScript: practical activity n¬∞2"
	                }
	            ]
	        },
	        {
	            "@type": "Article",
	            "@id": "http://localhost/front-end-web-development/languages/javascript-practical-activity-n2/#article",
	            "isPartOf": {
	                "@id": "http://localhost/front-end-web-development/languages/javascript-practical-activity-n2/#webpage"
	            },
	            "author": {
	                "@id": "http://localhost/#/schema/person/98465ef1c45a4646324ef7c336388ffb"
	            },
	            "headline": "11. JavaScript: practical activity n¬∞2",
	            "datePublished": "2021-02-05T10:03:47+00:00",
	            "dateModified": "2022-09-12T18:27:04+00:00",
	            "mainEntityOfPage": {
	                "@id": "http://localhost/front-end-web-development/languages/javascript-practical-activity-n2/#webpage"
	            },
	            "wordCount": 1625,
	            "publisher": {
	                "@id": "http://localhost/#/schema/person/98465ef1c45a4646324ef7c336388ffb"
	            },
	            "articleSection": [
	                "02. Languages",
	                "Modern web development"
	            ],
	            "inLanguage": "fr-FR"
	        },
	        {
	            "@type": [
	                "Person",
	                "Organization"
	            ],
	            "@id": "http://localhost/#/schema/person/98465ef1c45a4646324ef7c336388ffb",
	            "name": "Thomas Veillard",
	            "image": {
	                "@type": "ImageObject",
	                "@id": "http://localhost/#personlogo",
	                "inLanguage": "fr-FR",
	                "url": "http://2.gravatar.com/avatar/2008ad33ccb3924190bb884024ca6114?s=96&d=mm&r=g",
	                "contentUrl": "http://2.gravatar.com/avatar/2008ad33ccb3924190bb884024ca6114?s=96&d=mm&r=g",
	                "caption": "Thomas Veillard"
	            },
	            "logo": {
	                "@id": "http://localhost/#personlogo"
	            },
	            "sameAs": [
	                "http://localhost:8080"
	            ]
	        }
	    ]
	}</script>
	<!-- / Yoast SEO plugin. -->


<link rel="dns-prefetch" href="//fonts.googleapis.com">
<link href="https://fonts.gstatic.com/" crossorigin rel="preconnect">
<link rel="alternate" type="application/rss+xml" title="Thomas VEILLARD &raquo; Flux" href="https://thomas-veillard.fr/feed/">
<link rel="alternate" type="application/rss+xml" title="Thomas VEILLARD &raquo; Flux des commentaires" href="https://thomas-veillard.fr/comments/feed/">
<link rel="stylesheet" id="wp-block-library-css" href="https://thomas-veillard.fr/wp-includes/css/dist/block-library/style.min.css?ver=5.7.4" media="all">
<link rel="stylesheet" id="wp-block-library-theme-css" href="https://thomas-veillard.fr/wp-includes/css/dist/block-library/theme.min.css?ver=5.7.4" media="all">
<link rel="stylesheet" id="dashicons-css" href="https://thomas-veillard.fr/wp-includes/css/dashicons.min.css?ver=5.7.4" media="all">
<link rel="stylesheet" id="vlp-public-css" href="https://thomas-veillard.fr/wp-content/plugins/visual-link-preview/dist/public.css?ver=2.2.4" media="all">
<link rel="stylesheet" id="twentyfifteen-fonts-css" href="https://fonts.googleapis.com/css?family=Noto+Sans%3A400italic%2C700italic%2C400%2C700%7CNoto+Serif%3A400italic%2C700italic%2C400%2C700%7CInconsolata%3A400%2C700&#038;subset=latin%2Clatin-ext&#038;display=fallback" media="all">
<link rel="stylesheet" id="genericons-css" href="https://thomas-veillard.fr/wp-content/themes/twentyfifteen/genericons/genericons.css?ver=20201208" media="all">
<link rel="stylesheet" id="twentyfifteen-style-css" href="https://thomas-veillard.fr/wp-content/themes/twentyfifteen/style.css?ver=20201208" media="all">
<link rel="stylesheet" id="twentyfifteen-block-style-css" href="https://thomas-veillard.fr/wp-content/themes/twentyfifteen/css/blocks.css?ver=20190102" media="all">
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentyfifteen-ie-css'  href='http://localhost/wp-content/themes/twentyfifteen/css/ie.css?ver=20170916' media='all' />
<![endif]-->
<!--[if lt IE 8]>
<link rel='stylesheet' id='twentyfifteen-ie7-css'  href='http://localhost/wp-content/themes/twentyfifteen/css/ie7.css?ver=20141210' media='all' />
<![endif]-->
<script src="https://thomas-veillard.fr/wp-includes/js/jquery/jquery.min.js?ver=3.5.1" id="jquery-core-js"></script>
<script src="https://thomas-veillard.fr/wp-includes/js/jquery/jquery-migrate.min.js?ver=3.3.2" id="jquery-migrate-js"></script>
<link rel="https://api.w.org/" href="https://thomas-veillard.fr/wp-json/">
<link rel="alternate" type="application/json" href="https://thomas-veillard.fr/wp-json/wp/v2/posts/2958">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://thomas-veillard.fr/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://thomas-veillard.fr/wp-includes/wlwmanifest.xml"> 
<meta name="generator" content="WordPress 5.7.4">
<link rel="shortlink" href="https://thomas-veillard.fr/?p=2958">
<link rel="alternate" type="application/json+oembed" href="https://thomas-veillard.fr/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhttps://thomas-veillard.fr%2Ffront-end-web-development%2Flanguages%2Fjavascript-practical-activity-n2%2F">
<link rel="alternate" type="text/xml+oembed" href="https://thomas-veillard.fr/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhttps://thomas-veillard.fr%2Ffront-end-web-development%2Flanguages%2Fjavascript-practical-activity-n2%2F&#038;format=xml">
		<style id="wp-custom-css">.entry-title {
	font-size: 1.6em !important;
	text-align: left;
}

article {
	text-align: justify;
	font-size: 0.9em;
}

@media screen and (min-width: 59.6875em) {
	.site-header {
		padding: 0 1em;
	}

	.main-navigation {
		margin: 1em;
	}
}

.main-navigation .current-menu-item > a, .main-navigation .current-menu-ancestor > a {
	font-weight: unset;
	color: black;
}

.main-navigation a {
	color: #666;
}

.no-puce, .no-puce ul {
	list-style-type: none;
}

table {
	margin-bottom: 0;
}

figcaption {
	margin-bottom: 1em !important;
}

h4 {
	margin-top: 1em !important;
	font-size: 1.25em !important;
}

h5 {
	font-size: 1em !important;
	text-transform: none !important;
	margin-top: 1em !important;
}

.exercice {
  padding: 1em;
  border-radius: 3px;
  border: 1px solid #795548;
  background: #f7f7f7;
}

.question {
  padding: 1em;
  border-radius: 3px;
  border: 1px solid #ab47bc;
  background: #f3e5f5;
}

.video-container {
	position: relative;
	padding-bottom: 56.25%; /* 16:9 */
	height: 0;
	margin-bottom: 1em;
}
.video-container iframe {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
}

.card {
  background: #fff;
  border-radius: 2px;
  padding: 2rem 1rem;
}

.card-1 {
  box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
  transition: all 0.3s cubic-bezier(.25,.8,.25,1);
}

.card-1-hoverable:hover {
  box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);
}

.post-thumbnail {
	margin-bottom: 0;
}

.entry-header {
	color: rgba(51, 51, 51, 0.7);
	font-family: "Noto Sans", sans-serif;
	background-color: #f7f7f7;
	padding-top: 2em;
	padding-bottom: 2em;
	margin-bottom: 1em;
}

.entry-title {
	margin: 0;
	font-weight: normal;
}

.hentry {
	padding-top: 0 !important;
}

table {
	table-layout: auto;
}

.menu-fr > a:before,
.menu-en > a:before {
	content: '';
	display: inline-block;
	width: 1.3em;
	height: 1em;
	margin-right: 0.5em;
}

.menu-fr > a:before {
	background-image: url('https://thomas-veillard.fr/wp-content/uploads/2021/04/fr.svg');
}

.menu-en > a:before {
	background-image: url('https://thomas-veillard.fr/wp-content/uploads/2021/04/en.svg');
}

blockquote, cite {
	font-size: 1em !important;
}

.ui-accordion-header h4 {
	margin-top: 0 !important;
}

.u-mbs { margin-bottom: 0.25em; }
.u-mlm { margin-left: 1em; }

.strikethrough {
	text-decoration: line-through;
}</style>
		</head>

<body class="post-template-default single single-post postid-2958 single-format-standard wp-embed-responsive">
<div id="page" class="hfeed site">
	<a class="skip-link screen-reader-text" href="#content">Aller au contenu</a>

	<div id="sidebar" class="sidebar">
		<header id="masthead" class="site-header" role="banner">
			<div class="site-branding">
										<p class="site-title"><a href="https://thomas-veillard.fr/" rel="home">Thomas VEILLARD</a></p>
												<p class="site-description">Mes cours et supports p√©dagogiques pour l&#039;enseignement de l&#039;ing√©nierie informatique.</p>
										<button class="secondary-toggle">Menu			</button>
</div>
<!-- .site-branding -->
		</header><!-- .site-header -->

			<div id="secondary" class="secondary">

					<nav id="site-navigation" class="main-navigation" role="navigation">
				<div class="menu-theorie-des-systemes-dexploitation-et-pratique-de-gnu-linux-container"><ul id="menu-theorie-des-systemes-dexploitation-et-pratique-de-gnu-linux" class="nav-menu">
<li id="menu-item-135" class="menu-fr menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-135">
<a href="https://thomas-veillard.fr/category/theorie-des-systemes-dexploitation-et-pratique-de-gnu-linux/">Th√©orie des syst√®mes d‚Äôexploitation et pratique de GNU/Linux</a>
<ul class="sub-menu">
	<li id="menu-item-49" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-49"><a href="https://thomas-veillard.fr/category/theorie-des-systemes-dexploitation-et-pratique-de-gnu-linux/chapitre-1-introduction/">Chapitre 1. Introduction</a></li>
	<li id="menu-item-558" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-558"><a href="https://thomas-veillard.fr/category/theorie-des-systemes-dexploitation-et-pratique-de-gnu-linux/chapitre-2-les-interfaces-utilisateur/">Chapitre 2. Les interfaces utilisateur</a></li>
</ul>
</li>
<li id="menu-item-1097" class="menu-en menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-has-children menu-item-1097">
<a href="https://thomas-veillard.fr/category/front-end-web-development/">Modern web development</a>
<ul class="sub-menu">
	<li id="menu-item-1366" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1366"><a href="https://thomas-veillard.fr/category/front-end-web-development/introduction/">Introduction</a></li>
	<li id="menu-item-2642" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-2642"><a href="https://thomas-veillard.fr/category/front-end-web-development/languages/">Languages</a></li>
</ul>
</li>
</ul></div>			</nav><!-- .main-navigation -->
		
		
		
	</div>
<!-- .secondary -->

	</div>
<!-- .sidebar -->

	<div id="content" class="site-content">

	<div id="primary" class="content-area">
		<main id="main" class="site-main" role="main">

		
<article id="post-2958" class="post-2958 post type-post status-publish format-standard hentry category-languages category-front-end-web-development">
	
	
	<header class="entry-header">
		<h1 class="entry-title">JavaScript: practical activity n¬∞2</h1>	</header><!-- .entry-header -->

	<div class="entry-content">
		
<h4>Learning outcomes</h4>



<ul>
<li>Manage dependencies with npm (install, check updates, find vulnerabilities&#8230;) ;</li>
<li>Run cli optionally shipped with your dependencies with npx ;</li>
<li>Split your application into multiple ES modules ;</li>
<li>Merge those ES-modules into a single bundle and run it into your browser ;</li>
<li>Use modern syntax while targeting older browsers using code transpilation ;</li>
<li>Use modern features while targeting older browsers using polyfills ;</li>
<li>Catch bugs and formatting issues using a linter ;</li>
<li>Introduce JSDoc comments (generate docs, improve IDE suggestion, catch bugs) ;</li>
<li>Build your application for production (optimisations, source maps&#8230;).</li>
</ul>



<h4>Download the source code</h4>



<p>I provide you a simple frontend application that renders a few stock price tables and charts. This small project is a specially crafted as a playground for this tutorial.</p>


<div class="exercice" style="display: flex; align-items: center; margin-bottom: 3em; background-color: #ffecb8">
  <i class="fad fa-download" style="font-size: 3em; color: #ffb300; margin-right: 16px"></i>
<div>
  <a href="https://thomas-veillard.fr/wp-content/uploads/2021/08/basic-rate-graph.zip">Download the learning material (source code)</a>
</div>
</div>



<h4>Run the unbundled sources</h4>



<p>Look at the sources under the <code>src</code> folder. The <code>index.js</code> is the entry point (the only script imported inside <code>index-es6-modules.html</code>). It imports the other files it needs via the <code>import ... from ...</code> statement. Each imported file is called a module.</p>



<p>Any module can import and/or export references. Those references could be variables, functions, classes, symbols, etc. For more information, both about the concept and the syntax, I recommend <a href="https://www.sitepoint.com/understanding-es6-modules/" target="_blank" rel="noreferrer noopener">this post about ES6-modules</a>.</p>



<p class="exercice"><strong>Exercise 1:</strong> Open <code>index-es6-modules.html</code> in your browser from the file browser (using ¬´¬†open with Chrome / Firefox / Edge¬†¬ª contextual menu). What is the error revealed inside the browser console?</p>



<div class="exercice">
<p><strong>Exercise 2</strong>: Launch a local HTTP server (seen <a href="https://thomas-veillard.fr/front-end-web-development/languages/8-fast-tour-of-javascript-setup/">in the lecture</a>) and run the application from it. Then, inspect the HTTP traffic and record some statistics:</p>
<ul style="margin-left: 1em; margin-bottom: 0">
<li>How many JS files were loaded ?</li>
<li>How long does it take on average to load one ES6-module ?</li>
<li>What is the total completion time to load all JS files ?</li>
<li>Did the browser download JS files sequentially or in parallel ?</li>
</ul>
</div>
<br>



<p><strong>Tips</strong>: your development tools record traffic network only when opened. You may refresh your tab with development tools opened to capture the whole network activity.</p>



<p class="exercice"><strong>Exercise 3</strong>: Discuss the performance penalty of serving ES6-modules as independent files to the browser. How to mitigate this performance issue?</p>



<h4>Getting familiar with npm features</h4>



<p>npm stands for ¬´¬†Node Package Manager¬†¬ª. This utility is shipped with the node.js installer and is a foundation of modern JavaScript ecosystem.</p>



<p>The primary goal of a package manager is making the installation of dependencies easy. Those dependencies may be libraries, frameworks, command line software, etc.</p>



<ul>
<li>A library can be imported like any ES6-module in your code.</li>
<li>A command line software is run from the terminal as a standalone software.</li>
<li>A framework is generally a set of multiple libraries, cli scripts and guidelines, that comes with strong opinions on how to use it.</li>
</ul>



<p class="has-text-align-center">***</p>



<p>First of all, npm is tightly coupled to the <code>package.json</code> file, which is both a manifest of the project and a configuration file for npm. Both your project using npm, and any dependency you install this way have it. A sample is included into the historical rates explorer app.</p>



<p>Any <code>package.json</code> contains basic information about the project, such as its <code>name</code>, <code>version</code> (which should follow <a href="https://semver.org/" target="_blank" rel="noreferrer noopener">semantic versioning</a> standard), <code>author</code> and <code>license</code>. Such a basic <code>package.json</code> can be created with the command <code>npm init</code>.</p>



<p>Then, you may specify dependencies (each one is identified with a name and an assertion about accepted versions). Just with that information, npm can pull dependencies from the <a href="https://www.npmjs.com/" target="_blank" rel="noreferrer noopener">public registry</a>.</p>



<p>The <code>package.json</code> of the sample app contains 2 groups of dependencies:</p>



<ul>
<li>those under the <code>dependencies</code> key, that are used by your code at runtime ;</li>
<li>those under the <code>devDependencies</code> key, that are part of the developer experience (for building your app, check code quality, execute automated testing, etc.).</li>
</ul>



<p>Depending on the npm&rsquo;s command you use, you can install each or all groups.</p>


<pre class="wp-block-code" aria-describedby="shcb-language-1" data-shcb-language-name="Bash" data-shcb-language-slug="bash"><link rel="stylesheet" id="syntax-highlighting-code-block-css" href="https://thomas-veillard.fr/wp-content/plugins/syntax-highlighting-code-block/vendor/scrivo/highlight-php/styles/default.css?ver=1.3.1" media="all"><div><code class="hljs language-bash"><span class="hljs-comment"># Installs all dependencies from package.json (dependencies and devDependencies)</span>
npm install

<span class="hljs-comment"># Installs only production dependencies from package.json (ignores devDependencies)</span>
npm install --prod

<span class="hljs-comment"># Installs a new package (called webpack-cli) and appends it to package.json (inside devDependencies)</span>
npm install webpack-cli --save-dev</code></div><small class="shcb-language" id="shcb-language-1"><span class="shcb-language__label">Langage du code¬†:</span> <span class="shcb-language__name">Bash</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">bash</span><span class="shcb-language__paren">)</span></small></pre>


<p class="exercice"><strong>Exercise 4</strong>: Install dependencies using the <code>npm install</code> command. Dependencies are locally stored inside the <code>node_modules</code> folder. Why is there far more many modules into <code>node_modules</code> that those declared in <code>package.json</code> ?</p>



<p class="has-text-align-center">***</p>



<p>Because dependencies and versions are listed in a single place and installable through a single command, you can ensure every replica of the installation use consistent dependencies.</p>



<p>Another great benefit is automated tasks and analysis you can run on it:</p>



<ul>
<li>track updates and install them easily (using <code>npm outdated</code>) ;</li>
<li>be alerted in case of security advice about one of your dependencies (find the command yourself).</li>
</ul>



<p class="exercice"><strong>Exercise 5</strong>: The rate history app is potentially vulnerable to a high-level security issue through one of its dependencies. Using npm, find all vulnerable packages and associated version.  In which release those bug have been fixed?</p>



<p><strong>Tips</strong>: Before npm exists, developers frequently used CDN (Content Delivery Network) to include libraries. A CDN hosts a JS script you may include just before your own script (ex. by appending <code>&lt;script src="https://CDN_HOST/jquery.min.js" /&gt;</code> to the HTML source). As a result, the library exposes its functions by populating the global scope. Using CDN generally leads to outdated and inconsistent dependency versions across the project, and finally to security issues and technical dept. The bundler (kind of tool we discuss later) cannot optimise your app. For those and various other reasons, <strong>prefer npm over CDN</strong>.</p>



<p class="has-text-align-center">***</p>



<p>Did you notice the <code>scripts</code> key in my <code>package</code>.json? It points to an object whose keys are user-defined names and values are the bash commands to execute. The value can make reference to cli software installed inside <code>node_modules</code>.</p>



<p>For example, running <code>npm run serve-es6-sources</code> will start a local http server (using the <code>http-server</code> package).</p>



<p>Very common script&rsquo;s names are:</p>



<ul>
<li>
<code>build</code>: to produce a distributable bundle, sometime with many transformations ;</li>
<li>
<code>watch</code>: mostly the same than <code>build</code>, but efficiently re-emits bundle on change ;</li>
<li>
<code>test</code>: to execute a suite of automated tests you wrote yourself.</li>
</ul>



<p>The <code>build</code> script can target both the production (by generating more optimised bundles) and development (by preferring fastly emitted bundles and easier debugging in the browser). The <code>watch</code> script is intended for development, of course.</p>



<h4>Bundle the sources using webpack</h4>



<p class="exercice"><strong>Exercise 6</strong>: Look at the webpack documentation (both <a href="https://webpack.js.org/" target="_blank" rel="noreferrer noopener">home page</a> and the <a href="https://webpack.js.org/concepts/" target="_blank" rel="noreferrer noopener">concepts</a>). What is its primary purpose and how does it fix our performance issue previously encountered with ES6-modules?</p>



<p class="exercice"><strong>Exercise 7</strong>: The <code>webpack.config.js</code> file is ready to build the aggregated bundle in development mode. The entry point is <code>src/index.js</code>. Bundle should be output at <code>dist/index.js</code>. You can run webpack using <code>npm run build</code>.</p>



<p><strong>Tips</strong>: look at the emitted <code>dist/index.js</code> and be sure to understand what webpack did. Remember to question the teacher when necessary.</p>



<p class="exercice"><strong>Exercise 8</strong>: Open <code>index-bundled.html</code> in your browser (could be from the disc or from HTTP server). Does it actually fix the ES-module fetching performance issue ? Please provide some evidence in your answer.</p>



<p class="exercice"><strong>Exercise 9</strong>: Compare webpack&rsquo;s output in development and in production mode.</p>



<h4>The browser compatibility issue</h4>



<p>The 2 major kinds of compatibility issues are <strong>unsupported syntax</strong> and <strong>missing features</strong>.</p>



<ul><li>Fixing an <strong>unsupported syntax</strong> error imply transforming your code not to use that syntax anymore. For example, you could write classes without the <code>class</code> keyword.</li></ul>


<pre class="wp-block-code" aria-describedby="shcb-language-2" data-shcb-language-name="JavaScript" data-shcb-language-slug="javascript"><div><code class="hljs language-javascript"><span class="hljs-comment">// ES6 code (using the class keyword)</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>{
  <span class="hljs-keyword">constructor</span> (id, firstName, lastName) {
    <span class="hljs-keyword">this</span>.id = id
    <span class="hljs-keyword">this</span>.firstName = firstName
    <span class="hljs-keyword">this</span>.lastName = lastName
  }
  
  getName () {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.firstName + <span class="hljs-string">' '</span> + <span class="hljs-keyword">this</span>.lastName.toUpperCase() 
  }
}</code></div><small class="shcb-language" id="shcb-language-2"><span class="shcb-language__label">Langage du code¬†:</span> <span class="shcb-language__name">JavaScript</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">javascript</span><span class="shcb-language__paren">)</span></small></pre>

<pre class="wp-block-code" aria-describedby="shcb-language-3" data-shcb-language-name="JavaScript" data-shcb-language-slug="javascript"><div><code class="hljs language-javascript"><span class="hljs-comment">// Isofunctional ES5 code (defining the same class without using the `class` keyword)</span>

<span class="hljs-keyword">var</span> User = (<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">User</span>(<span class="hljs-params">id, firstName, lastName</span>) </span>{
        <span class="hljs-keyword">this</span>.id = id
        <span class="hljs-keyword">this</span>.firstName = firstName
        <span class="hljs-keyword">this</span>.lastName = lastName
    }

    User.prototype.getName = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.firstName + <span class="hljs-string">' '</span> + <span class="hljs-keyword">this</span>.lastName.toUpperCase()
    }

    <span class="hljs-keyword">return</span> User
}())</code></div><small class="shcb-language" id="shcb-language-3"><span class="shcb-language__label">Langage du code¬†:</span> <span class="shcb-language__name">JavaScript</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">javascript</span><span class="shcb-language__paren">)</span></small></pre>


<p>But instead of writing old, verbose, ugly and potentially buggy code, it is common to <strong>transpile</strong> from recent syntax to older one. That the purpose of <a href="https://babeljs.io/" target="_blank" rel="noreferrer noopener">babeljs</a>, which can work as a plugin for webpack. This will be one of your next job ü§ó.</p>



<ul><li>Fixing a <strong>missing feature</strong> issue is more complicated depending on your use case. You cannot implement yourself the support of NFC hardware if the browser does not have this feature. But you can implement yourself some utility methods introduced recently.</li></ul>



<p>Let&rsquo;s suppose your code uses the <code>array.includes(item)</code> methods, which returns <code>true</code> if <code>item</code> is in <code>array</code>. This method has been introduced in ES7 (released in 2016).</p>



<p>That method can easily be implemented with a one-liner snippet. Then, you can add it to the Array&rsquo;s prototype and make it callable on any array instance.</p>


<pre class="wp-block-code" aria-describedby="shcb-language-4" data-shcb-language-name="JavaScript" data-shcb-language-slug="javascript"><div><code class="hljs language-javascript"><span class="hljs-comment">// ‚õîÔ∏è you CANNOT use [1, 2, 3].includes(2) on old browser</span>

<span class="hljs-built_in">Array</span>.prototype.includes = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">search</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.indexOf(search) !== <span class="hljs-number">-1</span>
}

<span class="hljs-comment">// üöÄ you CAN use [1, 2, 3].includes(2) (if array.indexOf() is supported)</span></code></div><small class="shcb-language" id="shcb-language-4"><span class="shcb-language__label">Langage du code¬†:</span> <span class="shcb-language__name">JavaScript</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">javascript</span><span class="shcb-language__paren">)</span></small></pre>


<p><strong>Tips</strong>: Extending prototypes is generally a bad practice as it leads to conflicts with someone else&rsquo;s code using the same name. Nevertheless, it is allowed to backport missing standard methods (as long as it strictly behaves the same way). Those backported methods are called <strong>polyfills</strong>. Also, the community shares npm package with ready to import polyfills, like the popular <a href="https://github.com/zloirock/core-js" target="_blank" rel="noreferrer noopener">core-js</a>.</p>



<p class="has-text-align-center">***</p>



<p>For the next questions, you need an obsolete browser. More exactly, we will use Internet Explorer 11. If not available on your system, you can:</p>



<ol>
<li>run a free IE 11 instance on the cloud with <a href="https://www.browserling.com/" target="_blank" rel="noreferrer noopener">browserling.com</a> ;</li>
<li>forward your local HTTP server with <a href="https://ngrok.com/" target="_blank" rel="noreferrer noopener">ngrok.com</a>.</li>
</ol>



<p><strong>Tips</strong>: If you need to set up browserling + ngrok combo before the teacher demonstrated their usage, notify him!</p>



<p class="has-text-align-center">***</p>



<p class="exercice"><strong>Exercise 10</strong>: Try the bundled app with Internet Explorer 11. Why IE does it fail to run the bundled app?</p>



<p class="exercice"><strong>Exercice 11</strong>: The following webpack&rsquo;s configuration sends every <code>.js</code> to <code>babel-loader</code>. Babel transforms any syntax not supported by IE 11. Is it enough to ensure compatibility with IE? Why?</p>


<pre class="wp-block-code" aria-describedby="shcb-language-5" data-shcb-language-name="JavaScript" data-shcb-language-slug="javascript"><div><code class="hljs language-javascript"><span class="hljs-comment">// updated webpack.config.js that integrates babel to assets pipeline.</span>
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>)

<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">entry</span>: <span class="hljs-string">'./src/index.js'</span>,
  <span class="hljs-attr">mode</span>: <span class="hljs-string">'development'</span>,
  <span class="hljs-attr">target</span>: [<span class="hljs-string">'web'</span>, <span class="hljs-string">'es5'</span>],
  <span class="hljs-attr">output</span>: {
    <span class="hljs-attr">path</span>: path.resolve(__dirname, <span class="hljs-string">'dist'</span>),
    <span class="hljs-attr">filename</span>: <span class="hljs-string">'index.js'</span>
  },
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.m?js$/</span>,
        <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>,
        <span class="hljs-attr">use</span>: {
          <span class="hljs-attr">loader</span>: <span class="hljs-string">'babel-loader'</span>,
          <span class="hljs-attr">options</span>: {
            <span class="hljs-attr">targets</span>: <span class="hljs-string">'ie &gt;= 11'</span>,
            <span class="hljs-attr">presets</span>: [<span class="hljs-string">'@babel/preset-env'</span>]
          }
        }
      }
    ]
  }
}</code></div><small class="shcb-language" id="shcb-language-5"><span class="shcb-language__label">Langage du code¬†:</span> <span class="shcb-language__name">JavaScript</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">javascript</span><span class="shcb-language__paren">)</span></small></pre>


<p>You also need in import the babel utilties (transformed code uses them):</p>


<pre class="wp-block-code" aria-describedby="shcb-language-6" data-shcb-language-name="JavaScript" data-shcb-language-slug="javascript"><div><code class="hljs language-javascript"><span class="hljs-comment">// add this at the beginning of index.js</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'regenerator-runtime/runtime'</span></code></div><small class="shcb-language" id="shcb-language-6"><span class="shcb-language__label">Langage du code¬†:</span> <span class="shcb-language__name">JavaScript</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">javascript</span><span class="shcb-language__paren">)</span></small></pre>


<p class="exercice"><strong>Exercice 12</strong>: Import the required polyfills from <a href="https://github.com/zloirock/core-js" target="_blank" rel="noreferrer noopener">core-js</a> and <a href="https://github.com/github/fetch" target="_blank" rel="noreferrer noopener">whatwg-fetch</a> in <code>index.js</code>. Now, the app should work on IE 11.</p>



<p class="exercice"><strong>Exercise 13</strong>: List at least 2 issues of transpiling the code and adding polyfills like we did. Try to mention a mitigation or a solution for each issue.</p>



<h4>Hey! Still alive?</h4>



<p>Congratulations for going so far! Despite there is still a lot uncovered learning outcomes, you have completed the mandatory part. The rest of the topics will be explained by the teacher at the end of the activity.</p>



<p>In case you are ahead of time, feel free to reach yourself the above goals:</p>



<ol>
<li>Catch some code smells and improved code formatting with <a href="https://standardjs.com/" target="_blank" rel="noreferrer noopener">standard.js</a>.</li>
<li>Generate documentation using JSDoc.</li>
<li>Test the quality of autocomplete with vscode, intellisense and JSDoc.</li>
<li>Catch errors using types described in JSDoc comments with the typescript compiler in JS-compatible mode.</li>
<li>Improve debugging experience for transformed code with source-maps.</li>
</ol>



<h4>Breaking change! Vue moved from Vue-CLI to <code>vue-create</code>.</h4>



<p>My initial intent while writing this tutorial was to explain the tools behind <code>Vue-CLI</code>, the official command line tool to create and manage vue applications. As of September 2022, the <code><a href="https://cli.vuejs.org/guide/installation.html" target="_blank" rel="noreferrer noopener">vue-cli</a></code> is now deprecated in favour of <code><a href="https://vuejs.org/guide/quick-start.html#with-build-tools" target="_blank" rel="noreferrer noopener">vue-create</a></code>. It does not use webpack under the hook anymore. Still, the background exposed in the current tutorial still helps to understand the benefits of <a href="https://vitejs.dev/guide/why.html" target="_blank" rel="noreferrer noopener">Vite</a> and <a href="https://rollupjs.org/guide/en/" target="_blank" rel="noreferrer noopener">Rollup</a> internally used by the new tool chain.</p>
<style class="advgb-styles-renderer">.wp-block-code {
	border: 0;
	padding: 0;
}

.wp-block-code > div {
	overflow: auto;
}

.shcb-language {
	border: 0;
	clip: rect(1px, 1px, 1px, 1px);
	-webkit-clip-path: inset(50%);
	clip-path: inset(50%);
	height: 1px;
	margin: -1px;
	overflow: hidden;
	padding: 0;
	position: absolute;
	width: 1px;
	word-wrap: normal;
	word-break: normal;
}

.hljs {
	box-sizing: border-box;
}

.hljs.shcb-code-table {
	display: table;
	width: 100%;
}

.hljs.shcb-code-table > .shcb-loc {
	color: inherit;
	display: table-row;
	width: 100%;
}

.hljs.shcb-code-table .shcb-loc > span {
	display: table-cell;
}

.wp-block-code code.hljs:not(.shcb-wrap-lines) {
	white-space: pre;
}

.wp-block-code code.hljs.shcb-wrap-lines {
	white-space: pre-wrap;
}

.hljs.shcb-line-numbers {
	border-spacing: 0;
	counter-reset: line;
}

.hljs.shcb-line-numbers > .shcb-loc {
	counter-increment: line;
}

.hljs.shcb-line-numbers .shcb-loc > span {
	padding-left: 0.75em;
}

.hljs.shcb-line-numbers .shcb-loc::before {
	border-right: 1px solid #ddd;
	content: counter(line);
	display: table-cell;
	padding: 0 0.75em;
	text-align: right;
	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
	white-space: nowrap;
	width: 1%;
}</style>	</div>
<!-- .entry-content -->

	
	<img width="100%" src="https://thomas-veillard.fr/wp-content/uploads/2021/02/great-job.jpg">
	<footer class="entry-footer">
		<span class="cat-links"><span class="screen-reader-text">Cat√©gories </span><a href="https://thomas-veillard.fr/category/front-end-web-development/languages/" rel="category tag">02. Languages</a>, <a href="https://thomas-veillard.fr/category/front-end-web-development/" rel="category tag">Modern web development</a></span>			</footer><!-- .entry-footer -->

</article><!-- #post-2958 -->


	<nav class="navigation post-navigation" role="navigation" aria-label="Publications">
		<h2 class="screen-reader-text">Navigation de l‚Äôarticle</h2>
		<div class="nav-links">
<div class="nav-previous"><a href="https://thomas-veillard.fr/front-end-web-development/languages/javascript-classes/" rel="prev"><span class="meta-nav" aria-hidden="true">Pr√©c√©dent</span> <span class="screen-reader-text">Article pr√©c√©dent&nbsp;:</span> <span class="post-title">10. JavaScript: classes</span></a></div>
<div class="nav-next"><a href="https://thomas-veillard.fr/front-end-web-development/vue/01-vue-practical-activity-part-n1/" rel="next"><span class="meta-nav" aria-hidden="true">Suivant</span> <span class="screen-reader-text">Article suivant&nbsp;:</span> <span class="post-title">01. Vue: practical activity, part n¬∞1</span></a></div>
</div>
	</nav>
		</main><!-- .site-main -->
	</div>
<!-- .content-area -->


	</div>
<!-- .site-content -->

</div>
<!-- .site -->

<script src="https://kit.fontawesome.com/f02a77f3db.js" crossorigin="anonymous"></script>
<script src="https://thomas-veillard.fr/wp-content/plugins/thomas/js/main.js"></script>
<script data-ad-client="ca-pub-9505048372269906" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NH45PR7ELJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-NH45PR7ELJ');
</script>
<script src="https://thomas-veillard.fr/wp-content/themes/twentyfifteen/js/skip-link-focus-fix.js?ver=20141028" id="twentyfifteen-skip-link-focus-fix-js"></script>
<script id="twentyfifteen-script-js-extra">
var screenReaderText = {"expand":"<span class=\"screen-reader-text\">ouvrir le sous-menu<\/span>","collapse":"<span class=\"screen-reader-text\">fermer le sous-menu<\/span>"};
</script>
<script src="https://thomas-veillard.fr/wp-content/themes/twentyfifteen/js/functions.js?ver=20171218" id="twentyfifteen-script-js"></script>
<script src="https://thomas-veillard.fr/wp-includes/js/wp-embed.min.js?ver=5.7.4" id="wp-embed-js"></script>

</body>
</html>